

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Source: BundleManager.js | Pinwheel</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/tui-doc.css">

    
        
            <link type="text/css" rel="stylesheet" href="../assets/stylesheets/srcdocs.css">
        
            <link type="text/css" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans|PT+Mono|Material+Icons|Fugaz+One">
        
    
</head>
<body>
<nav class="lnb" id="lnb">
    <div class="logo" style="width: 120px; height: 120px">
        <img src="../_static/images/logo.png" width="100%" height="100%">
    </div>
    <div class="title">
        <h1><a href="index.html" class="link">Pinwheel</a></h1>
        
    </div>
    <div class="search-container" id="search-container">
        <input type="text" placeholder="Search">
        <ul></ul>
    </div>
    
    <div class="lnb-api hidden"><h3>Classes</h3><ul><li><a href="Account.html">Account</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Account_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Account.html#activateAccount">activateAccount</a></li><li><a href="Account.html#activateCharacter">activateCharacter</a></li><li><a href="Account.html#addCharacter">addCharacter</a></li><li><a href="Account.html#ban">ban</a></li><li><a href="Account.html#checkPassword">checkPassword</a></li><li><a href="Account.html#deactivateAccount">deactivateAccount</a></li><li><a href="Account.html#deactivateCharacter">deactivateCharacter</a></li><li><a href="Account.html#getUsername">getUsername</a></li><li><a href="Account.html#hasCharacter">hasCharacter</a></li><li><a href="Account.html#save">save</a></li><li><a href="Account.html#serialize">serialize</a></li><li><a href="Account.html#setPassword">setPassword</a></li><li><a href="Account.html#unban">unban</a></li></ul></div></li><li><a href="AccountManager.html">AccountManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="AccountManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="AccountManager.html#addAccount">addAccount</a></li><li><a href="AccountManager.html#getAccount">getAccount</a></li><li><a href="AccountManager.html#loadAccount">loadAccount</a></li></ul></div></li><li><a href="Area.html">Area</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Area_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Area.html#areaPath">areaPath</a></li><li><a href="Area.html#floors">floors</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="Area.html#addItem">addItem</a></li><li><a href="Area.html#addNpc">addNpc</a></li><li><a href="Area.html#addPlayer">addPlayer</a></li><li><a href="Area.html#addRoom">addRoom</a></li><li><a href="Area.html#addRoomToMap">addRoomToMap</a></li><li><a href="Area.html#emit">emit</a></li><li><a href="Area.html#getBehavior">getBehavior</a></li><li><a href="Area.html#getBroadcastTargets">getBroadcastTargets</a></li><li><a href="Area.html#getRoomAtCoordinates">getRoomAtCoordinates</a></li><li><a href="Area.html#getRoomById">getRoomById</a></li><li><a href="Area.html#hasBehavior">hasBehavior</a></li><li><a href="Area.html#hydrate">hydrate</a></li><li><a href="Area.html#loadItem">loadItem</a></li><li><a href="Area.html#loadNpc">loadNpc</a></li><li><a href="Area.html#loadQuest">loadQuest</a></li><li><a href="Area.html#removeItem">removeItem</a></li><li><a href="Area.html#removeNpc">removeNpc</a></li><li><a href="Area.html#removePlayer">removePlayer</a></li><li><a href="Area.html#removeRoom">removeRoom</a></li><li><a href="Area.html#save">save</a></li><li><a href="Area.html#serialize">serialize</a></li><li><a href="Area.html#updateTick">updateTick</a></li></ul></div></li><li><a href="AreaFloor.html">AreaFloor</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="AreaFloor_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="AreaFloor.html#addRoom">addRoom</a></li><li><a href="AreaFloor.html#getRoom">getRoom</a></li><li><a href="AreaFloor.html#removeRoom">removeRoom</a></li></ul></div></li><li><a href="AreaManager.html">AreaManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="AreaManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="AreaManager.html#addArea">addArea</a></li><li><a href="AreaManager.html#distribute">distribute</a></li><li><a href="AreaManager.html#getArea">getArea</a></li><li><a href="AreaManager.html#getAreaByReference">getAreaByReference</a></li><li><a href="AreaManager.html#removeArea">removeArea</a></li><li><a href="AreaManager.html#saveAll">saveAll</a></li><li><a href="AreaManager.html#tickAll">tickAll</a></li></ul></div></li><li><a href="Aspect.html">Aspect</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Aspect_sub"></div></li><li><a href="AspectManager.html">AspectManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="AspectManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="AspectManager.html#addAspect">addAspect</a></li><li><a href="AspectManager.html#attachListeners">attachListeners</a></li><li><a href="AspectManager.html#getAspect">getAspect</a></li><li><a href="AspectManager.html#removeAspect">removeAspect</a></li><li><a href="AspectManager.html#setupAspect">setupAspect</a></li></ul></div></li><li><a href="Attribute.html">Attribute</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Attribute_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Attribute.html#lower">lower</a></li><li><a href="Attribute.html#raise">raise</a></li><li><a href="Attribute.html#setBase">setBase</a></li><li><a href="Attribute.html#setDelta">setDelta</a></li></ul></div></li><li><a href="Attributes.html">Attributes</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Attributes_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Attributes.html#add">add</a></li><li><a href="Attributes.html#clearDeltas">clearDeltas</a></li><li><a href="Attributes.html#getAttributes">getAttributes</a></li><li><a href="Attributes.html#serialize">serialize</a></li></ul></div></li><li><a href="BehaviorManager.html">BehaviorManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="BehaviorManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="BehaviorManager.html#addListener">addListener</a></li></ul></div></li><li><a href="Broadcast.html">Broadcast</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Broadcast_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Broadcast.html#.at">at</a></li><li><a href="Broadcast.html#.atExcept">atExcept</a></li><li><a href="Broadcast.html#.capitalize">capitalize</a></li><li><a href="Broadcast.html#.center">center</a></li><li><a href="Broadcast.html#.indent">indent</a></li><li><a href="Broadcast.html#.line">line</a></li><li><a href="Broadcast.html#.progress">progress</a></li><li><a href="Broadcast.html#.prompt">prompt</a></li><li><a href="Broadcast.html#.sayAt">sayAt</a></li><li><a href="Broadcast.html#.sayAtExcept">sayAtExcept</a></li><li><a href="Broadcast.html#.wrap">wrap</a></li></ul></div></li><li><a href="BundleManager.html">BundleManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="BundleManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="BundleManager.html#createCommand">createCommand</a></li><li><a href="BundleManager.html#loadArchetypes">loadArchetypes</a></li><li><a href="BundleManager.html#loadArea">loadArea</a></li><li><a href="BundleManager.html#loadAreas">loadAreas</a></li><li><a href="BundleManager.html#loadBehaviors">loadBehaviors</a></li><li><a href="BundleManager.html#loadBundle">loadBundle</a></li><li><a href="BundleManager.html#loadBundles">loadBundles</a></li><li><a href="BundleManager.html#loadChannels">loadChannels</a></li><li><a href="BundleManager.html#loadCommands">loadCommands</a></li><li><a href="BundleManager.html#loadEffects">loadEffects</a></li><li><a href="BundleManager.html#loadEntityBehaviors">loadEntityBehaviors</a></li><li><a href="BundleManager.html#loadHelp">loadHelp</a></li><li><a href="BundleManager.html#loadInputEvents">loadInputEvents</a></li><li><a href="BundleManager.html#loadItems">loadItems</a></li><li><a href="BundleManager.html#loadNpcs">loadNpcs</a></li><li><a href="BundleManager.html#loadPlayerEvents">loadPlayerEvents</a></li><li><a href="BundleManager.html#loadQuestGoals">loadQuestGoals</a></li><li><a href="BundleManager.html#loadQuestRewards">loadQuestRewards</a></li><li><a href="BundleManager.html#loadQuests">loadQuests</a></li><li><a href="BundleManager.html#loadRooms">loadRooms</a></li><li><a href="BundleManager.html#loadServerEvents">loadServerEvents</a></li><li><a href="BundleManager.html#loadSkills">loadSkills</a></li><li><a href="BundleManager.html#loadSpecies">loadSpecies</a></li><li><a href="BundleManager.html#loadTraits">loadTraits</a></li></ul></div></li><li><a href="Channel.html">Channel</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Channel_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Channel.html#colorify">colorify</a></li><li><a href="Channel.html#describeSelf">describeSelf</a></li><li><a href="Channel.html#formatToRecipient">formatToRecipient</a></li><li><a href="Channel.html#formatToSender">formatToSender</a></li><li><a href="Channel.html#getUsage">getUsage</a></li><li><a href="Channel.html#send">send</a></li></ul></div></li><li><a href="ChannelAudience.AreaAudience.html">AreaAudience</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ChannelAudience.AreaAudience_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="ChannelAudience.AreaAudience.html#alterMessage">alterMessage</a></li><li><a href="ChannelAudience.AreaAudience.html#configure">configure</a></li><li><a href="ChannelAudience.AreaAudience.html#getBroadcastTargets">getBroadcastTargets</a></li></ul></div></li><li><a href="ChannelAudience.PartyAudience.html">PartyAudience</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ChannelAudience.PartyAudience_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="ChannelAudience.PartyAudience.html#alterMessage">alterMessage</a></li><li><a href="ChannelAudience.PartyAudience.html#configure">configure</a></li><li><a href="ChannelAudience.PartyAudience.html#getBroadcastTargets">getBroadcastTargets</a></li></ul></div></li><li><a href="ChannelAudience.PrivateAudience.html">PrivateAudience</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ChannelAudience.PrivateAudience_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="ChannelAudience.PrivateAudience.html#alterMessage">alterMessage</a></li><li><a href="ChannelAudience.PrivateAudience.html#configure">configure</a></li><li><a href="ChannelAudience.PrivateAudience.html#getBroadcastTargets">getBroadcastTargets</a></li></ul></div></li><li><a href="ChannelAudience.RoleAudience.html">RoleAudience</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ChannelAudience.RoleAudience_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="ChannelAudience.RoleAudience.html#alterMessage">alterMessage</a></li><li><a href="ChannelAudience.RoleAudience.html#configure">configure</a></li><li><a href="ChannelAudience.RoleAudience.html#getBroadcastTargets">getBroadcastTargets</a></li></ul></div></li><li><a href="ChannelAudience.RoomAudience.html">RoomAudience</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ChannelAudience.RoomAudience_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="ChannelAudience.RoomAudience.html#alterMessage">alterMessage</a></li><li><a href="ChannelAudience.RoomAudience.html#configure">configure</a></li><li><a href="ChannelAudience.RoomAudience.html#getBroadcastTargets">getBroadcastTargets</a></li></ul></div></li><li><a href="ChannelAudience.WorldAudience.html">WorldAudience</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ChannelAudience.WorldAudience_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="ChannelAudience.WorldAudience.html#alterMessage">alterMessage</a></li><li><a href="ChannelAudience.WorldAudience.html#configure">configure</a></li><li><a href="ChannelAudience.WorldAudience.html#getBroadcastTargets">getBroadcastTargets</a></li></ul></div></li><li><a href="ChannelManager.html">ChannelManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ChannelManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="ChannelManager.html#add">add</a></li><li><a href="ChannelManager.html#find">find</a></li><li><a href="ChannelManager.html#remove">remove</a></li></ul></div></li><li><a href="Character.html">Character</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Character_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Character.html#isNpc">isNpc</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="Character.html#addAttribute">addAttribute</a></li><li><a href="Character.html#addCombatant">addCombatant</a></li><li><a href="Character.html#addEffect">addEffect</a></li><li><a href="Character.html#addFollower">addFollower</a></li><li><a href="Character.html#addItem">addItem</a></li><li><a href="Character.html#addSkill">addSkill</a></li><li><a href="Character.html#canGo">canGo</a></li><li><a href="Character.html#emit">emit</a></li><li><a href="Character.html#equip">equip</a></li><li><a href="Character.html#evaluateIncomingDamage">evaluateIncomingDamage</a></li><li><a href="Character.html#evaluateOutgoingDamage">evaluateOutgoingDamage</a></li><li><a href="Character.html#follow">follow</a></li><li><a href="Character.html#getAttribute">getAttribute</a></li><li><a href="Character.html#getAttributeBase">getAttributeBase</a></li><li><a href="Character.html#getBroadcastTargets">getBroadcastTargets</a></li><li><a href="Character.html#getMaxAttribute">getMaxAttribute</a></li><li><a href="Character.html#hasAttribute">hasAttribute</a></li><li><a href="Character.html#hasEffectType">hasEffectType</a></li><li><a href="Character.html#hasFollower">hasFollower</a></li><li><a href="Character.html#hasItem">hasItem</a></li><li><a href="Character.html#hydrate">hydrate</a></li><li><a href="Character.html#initializeInventory">initializeInventory</a></li><li><a href="Character.html#initiateCombat">initiateCombat</a></li><li><a href="Character.html#isFollowing">isFollowing</a></li><li><a href="Character.html#isInCombat">isInCombat</a></li><li><a href="Character.html#isInventoryFull">isInventoryFull</a></li><li><a href="Character.html#lowerAttribute">lowerAttribute</a></li><li><a href="Character.html#raiseAttribute">raiseAttribute</a></li><li><a href="Character.html#removeCombatant">removeCombatant</a></li><li><a href="Character.html#removeEffect">removeEffect</a></li><li><a href="Character.html#removeFollower">removeFollower</a></li><li><a href="Character.html#removeFromCombat">removeFromCombat</a></li><li><a href="Character.html#removeItem">removeItem</a></li><li><a href="Character.html#serialize">serialize</a></li><li><a href="Character.html#setAttributeBase">setAttributeBase</a></li><li><a href="Character.html#setAttributeToMax">setAttributeToMax</a></li><li><a href="Character.html#unequip">unequip</a></li><li><a href="Character.html#unfollow">unfollow</a></li></ul><div class="member-type">Events</div><ul class="inner"><li><a href="Character.html#event:damaged">damaged</a></li><li><a href="Character.html#event:effectAdded">effectAdded</a></li><li><a href="Character.html#event:effectRemoved">effectRemoved</a></li><li><a href="Character.html#event:heal">heal</a></li><li><a href="Character.html#event:healed">healed</a></li><li><a href="Character.html#event:hit">hit</a></li></ul></div></li><li><a href="Combat.html">Combat</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Combat_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Combat.html#.calculateWeaponDamage">calculateWeaponDamage</a></li><li><a href="Combat.html#.checkBlock">checkBlock</a></li><li><a href="Combat.html#.checkDodge">checkDodge</a></li><li><a href="Combat.html#.chooseCombatant">chooseCombatant</a></li><li><a href="Combat.html#.findCombatant">findCombatant</a></li><li><a href="Combat.html#.getWeaponDamage">getWeaponDamage</a></li><li><a href="Combat.html#.getWeaponSpeed">getWeaponSpeed</a></li><li><a href="Combat.html#.handleDeath">handleDeath</a></li><li><a href="Combat.html#.makeAttack">makeAttack</a></li><li><a href="Combat.html#.normalizeWeaponDamage">normalizeWeaponDamage</a></li><li><a href="Combat.html#.regenerateAfterCombat">regenerateAfterCombat</a></li><li><a href="Combat.html#.updateRound">updateRound</a></li></ul></div></li><li><a href="CombatInvalidTargetError.html">CombatInvalidTargetError</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="CombatInvalidTargetError_sub"></div></li><li><a href="CombatNonPvpError.html">CombatNonPvpError</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="CombatNonPvpError_sub"></div></li><li><a href="CombatPacifistError.html">CombatPacifistError</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="CombatPacifistError_sub"></div></li><li><a href="CombatSelfError.html">CombatSelfError</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="CombatSelfError_sub"></div></li><li><a href="Command.html">Command</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Command_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Command.html#execute">execute</a></li></ul></div></li><li><a href="CommandManager.html">CommandManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="CommandManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="CommandManager.html#add">add</a></li><li><a href="CommandManager.html#find">find</a></li><li><a href="CommandManager.html#remove">remove</a></li></ul></div></li><li><a href="CommandParser.html">CommandParser</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="CommandParser_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="CommandParser.html#.parse">parse</a></li><li><a href="CommandParser.html#.parseDot">parseDot</a></li></ul></div></li><li><a href="CommandQueue.html">CommandQueue</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="CommandQueue_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="CommandQueue.html#hasPending">hasPending</a></li><li><a href="CommandQueue.html#lagRemaining">lagRemaining</a></li><li><a href="CommandQueue.html#queue">queue</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="CommandQueue.html#enqueue">enqueue</a></li><li><a href="CommandQueue.html#execute">execute</a></li><li><a href="CommandQueue.html#flush">flush</a></li><li><a href="CommandQueue.html#getTimeTilRun">getTimeTilRun</a></li></ul></div></li><li><a href="Config.html">Config</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Config_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Config.html#.get">get</a></li><li><a href="Config.html#.getAll">getAll</a></li><li><a href="Config.html#.load">load</a></li><li><a href="Config.html#.save">save</a></li><li><a href="Config.html#.set">set</a></li></ul></div></li><li><a href="CooldownError.html">CooldownError</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="CooldownError_sub"></div></li><li><a href="Damage.html">Damage</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Damage_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Damage.html#commit">commit</a></li><li><a href="Damage.html#evaluate">evaluate</a></li></ul></div></li><li><a href="Data.html">Data</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Data_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Data.html#.exists">exists</a></li><li><a href="Data.html#.getDataFilePath">getDataFilePath</a></li><li><a href="Data.html#.isScriptFile">isScriptFile</a></li><li><a href="Data.html#.load">load</a></li><li><a href="Data.html#.loadMotd">loadMotd</a></li><li><a href="Data.html#.parseFile">parseFile</a></li><li><a href="Data.html#.save">save</a></li><li><a href="Data.html#.saveBug">saveBug</a></li><li><a href="Data.html#.saveFile">saveFile</a></li></ul></div></li><li><a href="Effect.html">Effect</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Effect_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Effect.html#description">description</a></li><li><a href="Effect.html#duration">duration</a></li><li><a href="Effect.html#duration">duration</a></li><li><a href="Effect.html#elapsed">elapsed</a></li><li><a href="Effect.html#name">name</a></li><li><a href="Effect.html#remaining">remaining</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="Effect.html#activate">activate</a></li><li><a href="Effect.html#deactivate">deactivate</a></li><li><a href="Effect.html#hydrate">hydrate</a></li><li><a href="Effect.html#isCurrent">isCurrent</a></li><li><a href="Effect.html#modifyAttribute">modifyAttribute</a></li><li><a href="Effect.html#modifyIncomingDamage">modifyIncomingDamage</a></li><li><a href="Effect.html#modifyOutgoingDamage">modifyOutgoingDamage</a></li><li><a href="Effect.html#pause">pause</a></li><li><a href="Effect.html#remove">remove</a></li><li><a href="Effect.html#resume">resume</a></li><li><a href="Effect.html#serialize">serialize</a></li></ul><div class="member-type">Events</div><ul class="inner"><li><a href="Effect.html#event:effectActivated">effectActivated</a></li><li><a href="Effect.html#event:effectAdded">effectAdded</a></li><li><a href="Effect.html#event:effectDeactivated">effectDeactivated</a></li><li><a href="Effect.html#event:effectRefreshed">effectRefreshed</a></li><li><a href="Effect.html#event:effectStackAdded">effectStackAdded</a></li><li><a href="Effect.html#event:pause">pause</a></li><li><a href="Effect.html#event:remove">remove</a></li><li><a href="Effect.html#event:resume">resume</a></li></ul></div></li><li><a href="EffectFactory.html">EffectFactory</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="EffectFactory_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="EffectFactory.html#add">add</a></li><li><a href="EffectFactory.html#create">create</a></li></ul></div></li><li><a href="EffectList.html">EffectList</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="EffectList_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="EffectList.html#size">size</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="EffectList.html#add">add</a></li><li><a href="EffectList.html#emit">emit</a></li><li><a href="EffectList.html#entries">entries</a></li><li><a href="EffectList.html#evaluateAttribute">evaluateAttribute</a></li><li><a href="EffectList.html#evaluateIncomingDamage">evaluateIncomingDamage</a></li><li><a href="EffectList.html#evaluateOutgoingDamage">evaluateOutgoingDamage</a></li><li><a href="EffectList.html#getByType">getByType</a></li><li><a href="EffectList.html#hasEffectType">hasEffectType</a></li><li><a href="EffectList.html#hydrate">hydrate</a></li><li><a href="EffectList.html#remove">remove</a></li><li><a href="EffectList.html#serialize">serialize</a></li><li><a href="EffectList.html#validateEffects">validateEffects</a></li></ul></div></li><li><a href="EntityFactory.html">EntityFactory</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="EntityFactory_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="EntityFactory.html#clone">clone</a></li><li><a href="EntityFactory.html#create">create</a></li><li><a href="EntityFactory.html#createByType">createByType</a></li><li><a href="EntityFactory.html#createEntityRef">createEntityRef</a></li><li><a href="EntityFactory.html#getDefinition">getDefinition</a></li><li><a href="EntityFactory.html#setDefinition">setDefinition</a></li></ul></div></li><li><a href="Equipment.html">Equipment</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Equipment_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Equipment.html#hydrate">hydrate</a></li><li><a href="Equipment.html#serialize">serialize</a></li></ul></div></li><li><a href="EquipSlotTakenError.html">EquipSlotTakenError</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="EquipSlotTakenError_sub"></div></li><li><a href="EventManager.html">EventManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="EventManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="EventManager.html#add">add</a></li><li><a href="EventManager.html#attach">attach</a></li><li><a href="EventManager.html#detach">detach</a></li></ul></div></li><li><a href="EventUtil.html">EventUtil</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="EventUtil_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="EventUtil.html#.genSay">genSay</a></li><li><a href="EventUtil.html#.genWrite">genWrite</a></li></ul></div></li><li><a href="Heal.html">Heal</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Heal_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Heal.html#commit">commit</a></li><li><a href="Heal.html#evaluate">evaluate</a></li></ul></div></li><li><a href="Helpfile.html">Helpfile</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Helpfile_sub"></div></li><li><a href="HelpManager.html">HelpManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="HelpManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="HelpManager.html#add">add</a></li><li><a href="HelpManager.html#find">find</a></li></ul></div></li><li><a href="HydrationUtil.html">HydrationUtil</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="HydrationUtil_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="HydrationUtil.html#.hydrateScript">hydrateScript</a></li></ul></div></li><li><a href="InvalidCommandError.html">InvalidCommandError</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="InvalidCommandError_sub"></div></li><li><a href="Inventory.html">Inventory</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Inventory_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Inventory.html#isFull">isFull</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="Inventory.html#addItem">addItem</a></li><li><a href="Inventory.html#getMax">getMax</a></li><li><a href="Inventory.html#hydrate">hydrate</a></li><li><a href="Inventory.html#removeItem">removeItem</a></li><li><a href="Inventory.html#serialize">serialize</a></li><li><a href="Inventory.html#setMax">setMax</a></li></ul></div></li><li><a href="InventoryFullError.html">InventoryFullError</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="InventoryFullError_sub"></div></li><li><a href="Item.html">Item</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Item_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Item.html#addItem">addItem</a></li><li><a href="Item.html#close">close</a></li><li><a href="Item.html#findOwner">findOwner</a></li><li><a href="Item.html#getBehavior">getBehavior</a></li><li><a href="Item.html#hasBehavior">hasBehavior</a></li><li><a href="Item.html#hasItem">hasItem</a></li><li><a href="Item.html#hasKeyword">hasKeyword</a></li><li><a href="Item.html#hydrate">hydrate</a></li><li><a href="Item.html#initializeInventory">initializeInventory</a></li><li><a href="Item.html#isInventoryFull">isInventoryFull</a></li><li><a href="Item.html#lock">lock</a></li><li><a href="Item.html#open">open</a></li><li><a href="Item.html#removeItem">removeItem</a></li><li><a href="Item.html#serialize">serialize</a></li><li><a href="Item.html#unlock">unlock</a></li></ul><div class="member-type">Events</div><ul class="inner"><li><a href="Item.html#event:closed">closed</a></li><li><a href="Item.html#event:locked">locked</a></li><li><a href="Item.html#event:opened">opened</a></li><li><a href="Item.html#event:spawn">spawn</a></li><li><a href="Item.html#event:unlocked">unlocked</a></li><li><a href="Item.html#event:updateTick">updateTick</a></li></ul></div></li><li><a href="ItemFactory.html">ItemFactory</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ItemFactory_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="ItemFactory.html#clone">clone</a></li><li><a href="ItemFactory.html#create">create</a></li><li><a href="ItemFactory.html#createByType">createByType</a></li><li><a href="ItemFactory.html#createEntityRef">createEntityRef</a></li><li><a href="ItemFactory.html#getDefinition">getDefinition</a></li><li><a href="ItemFactory.html#setDefinition">setDefinition</a></li></ul></div></li><li><a href="ItemManager.html">ItemManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ItemManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="ItemManager.html#remove">remove</a></li><li><a href="ItemManager.html#tickAll">tickAll</a></li></ul></div></li><li><a href="ItemUtil.html">ItemUtil</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ItemUtil_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="ItemUtil.html#.display">display</a></li><li><a href="ItemUtil.html#.qualityColorize">qualityColorize</a></li><li><a href="ItemUtil.html#.qualityColors">qualityColors</a></li><li><a href="ItemUtil.html#.renderItem">renderItem</a></li></ul></div></li><li><a href="Logger.html">Logger</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Logger_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Logger.html#.deactivateFileLogging">deactivateFileLogging</a></li><li><a href="Logger.html#.enablePrettyErrors">enablePrettyErrors</a></li><li><a href="Logger.html#.error">error</a></li><li><a href="Logger.html#.getLevel">getLevel</a></li><li><a href="Logger.html#.log">log</a></li><li><a href="Logger.html#.setFileLogging">setFileLogging</a></li><li><a href="Logger.html#.setLevel">setLevel</a></li><li><a href="Logger.html#.verbose">verbose</a></li><li><a href="Logger.html#.warn">warn</a></li></ul></div></li><li><a href="Loot.html">Loot</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Loot_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Loot.html#currencies">currencies</a></li><li><a href="Loot.html#items">items</a></li><li><a href="Loot.html#resolvePool">resolvePool</a></li></ul></div></li><li><a href="NotEnoughResourcesError.html">NotEnoughResourcesError</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="NotEnoughResourcesError_sub"></div></li><li><a href="Npc.html">Npc</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Npc_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Npc.html#isNpc">isNpc</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="Npc.html#addAttribute">addAttribute</a></li><li><a href="Npc.html#addCombatant">addCombatant</a></li><li><a href="Npc.html#addEffect">addEffect</a></li><li><a href="Npc.html#addFollower">addFollower</a></li><li><a href="Npc.html#addItem">addItem</a></li><li><a href="Npc.html#addSkill">addSkill</a></li><li><a href="Npc.html#canGo">canGo</a></li><li><a href="Npc.html#emit">emit</a></li><li><a href="Npc.html#equip">equip</a></li><li><a href="Npc.html#evaluateIncomingDamage">evaluateIncomingDamage</a></li><li><a href="Npc.html#evaluateOutgoingDamage">evaluateOutgoingDamage</a></li><li><a href="Npc.html#follow">follow</a></li><li><a href="Npc.html#getAttribute">getAttribute</a></li><li><a href="Npc.html#getAttributeBase">getAttributeBase</a></li><li><a href="Npc.html#getBehavior">getBehavior</a></li><li><a href="Npc.html#getBroadcastTargets">getBroadcastTargets</a></li><li><a href="Npc.html#getMaxAttribute">getMaxAttribute</a></li><li><a href="Npc.html#hasAttribute">hasAttribute</a></li><li><a href="Npc.html#hasBehavior">hasBehavior</a></li><li><a href="Npc.html#hasEffectType">hasEffectType</a></li><li><a href="Npc.html#hasFollower">hasFollower</a></li><li><a href="Npc.html#hasItem">hasItem</a></li><li><a href="Npc.html#hasKeyword">hasKeyword</a></li><li><a href="Npc.html#hydrate">hydrate</a></li><li><a href="Npc.html#initializeInventory">initializeInventory</a></li><li><a href="Npc.html#initiateCombat">initiateCombat</a></li><li><a href="Npc.html#isFollowing">isFollowing</a></li><li><a href="Npc.html#isInCombat">isInCombat</a></li><li><a href="Npc.html#isInventoryFull">isInventoryFull</a></li><li><a href="Npc.html#lowerAttribute">lowerAttribute</a></li><li><a href="Npc.html#moveTo">moveTo</a></li><li><a href="Npc.html#raiseAttribute">raiseAttribute</a></li><li><a href="Npc.html#removeCombatant">removeCombatant</a></li><li><a href="Npc.html#removeEffect">removeEffect</a></li><li><a href="Npc.html#removeFollower">removeFollower</a></li><li><a href="Npc.html#removeFromCombat">removeFromCombat</a></li><li><a href="Npc.html#removeItem">removeItem</a></li><li><a href="Npc.html#serialize">serialize</a></li><li><a href="Npc.html#setAttributeBase">setAttributeBase</a></li><li><a href="Npc.html#setAttributeToMax">setAttributeToMax</a></li><li><a href="Npc.html#unequip">unequip</a></li><li><a href="Npc.html#unfollow">unfollow</a></li></ul><div class="member-type">Events</div><ul class="inner"><li><a href="Npc.html#event:damaged">damaged</a></li><li><a href="Npc.html#event:effectAdded">effectAdded</a></li><li><a href="Npc.html#event:effectRemoved">effectRemoved</a></li><li><a href="Npc.html#event:heal">heal</a></li><li><a href="Npc.html#event:healed">healed</a></li><li><a href="Npc.html#event:hit">hit</a></li><li><a href="Npc.html#event:spawn">spawn</a></li></ul></div></li><li><a href="NpcFactory.html">NpcFactory</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="NpcFactory_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="NpcFactory.html#clone">clone</a></li><li><a href="NpcFactory.html#create">create</a></li><li><a href="NpcFactory.html#createByType">createByType</a></li><li><a href="NpcFactory.html#createEntityRef">createEntityRef</a></li><li><a href="NpcFactory.html#getDefinition">getDefinition</a></li><li><a href="NpcFactory.html#setDefinition">setDefinition</a></li></ul></div></li><li><a href="NpcManager.html">NpcManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="NpcManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="NpcManager.html#add">add</a></li><li><a href="NpcManager.html#remove">remove</a></li></ul></div></li><li><a href="Party.html">Party</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Party_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Party.html#add">add</a></li><li><a href="Party.html#delete">delete</a></li><li><a href="Party.html#disband">disband</a></li><li><a href="Party.html#getBroadcastTargets">getBroadcastTargets</a></li><li><a href="Party.html#invite">invite</a></li><li><a href="Party.html#isInvited">isInvited</a></li><li><a href="Party.html#removeInvite">removeInvite</a></li></ul></div></li><li><a href="PartyManager.html">PartyManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="PartyManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="PartyManager.html#create">create</a></li><li><a href="PartyManager.html#disband">disband</a></li></ul></div></li><li><a href="PassiveError.html">PassiveError</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="PassiveError_sub"></div></li><li><a href="Player.html">Player</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Player_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Player.html#isNpc">isNpc</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="Player.html#addAttribute">addAttribute</a></li><li><a href="Player.html#addCombatant">addCombatant</a></li><li><a href="Player.html#addEffect">addEffect</a></li><li><a href="Player.html#addFollower">addFollower</a></li><li><a href="Player.html#addItem">addItem</a></li><li><a href="Player.html#addPrompt">addPrompt</a></li><li><a href="Player.html#addSkill">addSkill</a></li><li><a href="Player.html#canGo">canGo</a></li><li><a href="Player.html#emit">emit</a></li><li><a href="Player.html#equip">equip</a></li><li><a href="Player.html#evaluateIncomingDamage">evaluateIncomingDamage</a></li><li><a href="Player.html#evaluateOutgoingDamage">evaluateOutgoingDamage</a></li><li><a href="Player.html#follow">follow</a></li><li><a href="Player.html#getAttribute">getAttribute</a></li><li><a href="Player.html#getAttributeBase">getAttributeBase</a></li><li><a href="Player.html#getBroadcastTargets">getBroadcastTargets</a></li><li><a href="Player.html#getMaxAttribute">getMaxAttribute</a></li><li><a href="Player.html#hasAttribute">hasAttribute</a></li><li><a href="Player.html#hasEffectType">hasEffectType</a></li><li><a href="Player.html#hasFollower">hasFollower</a></li><li><a href="Player.html#hasItem">hasItem</a></li><li><a href="Player.html#hasPrompt">hasPrompt</a></li><li><a href="Player.html#hydrate">hydrate</a></li><li><a href="Player.html#initializeInventory">initializeInventory</a></li><li><a href="Player.html#initiateCombat">initiateCombat</a></li><li><a href="Player.html#interpolatePrompt">interpolatePrompt</a></li><li><a href="Player.html#isFollowing">isFollowing</a></li><li><a href="Player.html#isInCombat">isInCombat</a></li><li><a href="Player.html#isInventoryFull">isInventoryFull</a></li><li><a href="Player.html#lowerAttribute">lowerAttribute</a></li><li><a href="Player.html#moveTo">moveTo</a></li><li><a href="Player.html#queueCommand">queueCommand</a></li><li><a href="Player.html#raiseAttribute">raiseAttribute</a></li><li><a href="Player.html#removeCombatant">removeCombatant</a></li><li><a href="Player.html#removeEffect">removeEffect</a></li><li><a href="Player.html#removeFollower">removeFollower</a></li><li><a href="Player.html#removeFromCombat">removeFromCombat</a></li><li><a href="Player.html#removeItem">removeItem</a></li><li><a href="Player.html#removePrompt">removePrompt</a></li><li><a href="Player.html#save">save</a></li><li><a href="Player.html#serialize">serialize</a></li><li><a href="Player.html#setAttributeBase">setAttributeBase</a></li><li><a href="Player.html#setAttributeToMax">setAttributeToMax</a></li><li><a href="Player.html#unequip">unequip</a></li><li><a href="Player.html#unfollow">unfollow</a></li></ul><div class="member-type">Events</div><ul class="inner"><li><a href="Player.html#event:damaged">damaged</a></li><li><a href="Player.html#event:effectAdded">effectAdded</a></li><li><a href="Player.html#event:effectRemoved">effectRemoved</a></li><li><a href="Player.html#event:heal">heal</a></li><li><a href="Player.html#event:healed">healed</a></li><li><a href="Player.html#event:hit">hit</a></li><li><a href="Player.html#event:questComplete">questComplete</a></li><li><a href="Player.html#event:questProgress">questProgress</a></li><li><a href="Player.html#event:questReward">questReward</a></li><li><a href="Player.html#event:questStart">questStart</a></li><li><a href="Player.html#event:questTurnInReady">questTurnInReady</a></li></ul></div></li><li><a href="PlayerManager.html">PlayerManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="PlayerManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="PlayerManager.html#addListener">addListener</a></li><li><a href="PlayerManager.html#addPlayer">addPlayer</a></li><li><a href="PlayerManager.html#exists">exists</a></li><li><a href="PlayerManager.html#filter">filter</a></li><li><a href="PlayerManager.html#getBroadcastTargets">getBroadcastTargets</a></li><li><a href="PlayerManager.html#getPlayer">getPlayer</a></li><li><a href="PlayerManager.html#getPlayersAsArray">getPlayersAsArray</a></li><li><a href="PlayerManager.html#keyify">keyify</a></li><li><a href="PlayerManager.html#loadPlayer">loadPlayer</a></li><li><a href="PlayerManager.html#removePlayer">removePlayer</a></li><li><a href="PlayerManager.html#saveAll">saveAll</a></li><li><a href="PlayerManager.html#tickAll">tickAll</a></li></ul></div></li><li><a href="Quest.html">Quest</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Quest_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Quest.html#addGoal">addGoal</a></li><li><a href="Quest.html#complete">complete</a></li><li><a href="Quest.html#emit">emit</a></li><li><a href="Quest.html#getProgress">getProgress</a></li><li><a href="Quest.html#hydrate">hydrate</a></li><li><a href="Quest.html#onProgressUpdated">onProgressUpdated</a></li><li><a href="Quest.html#serialize">serialize</a></li></ul><div class="member-type">Events</div><ul class="inner"><li><a href="Quest.html#event:complete">complete</a></li><li><a href="Quest.html#event:progress">progress</a></li><li><a href="Quest.html#event:turn-in-ready">turn-in-ready</a></li></ul></div></li><li><a href="QuestFactory.html">QuestFactory</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="QuestFactory_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="QuestFactory.html#add">add</a></li><li><a href="QuestFactory.html#create">create</a></li><li><a href="QuestFactory.html#makeQuestKey">makeQuestKey</a></li></ul></div></li><li><a href="QuestGoal.html">QuestGoal</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="QuestGoal_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="QuestGoal.html#complete">complete</a></li><li><a href="QuestGoal.html#getProgress">getProgress</a></li><li><a href="QuestGoal.html#hydrate">hydrate</a></li><li><a href="QuestGoal.html#serialize">serialize</a></li></ul></div></li><li><a href="QuestPartManager.html">QuestPartManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="QuestPartManager_sub"></div></li><li><a href="QuestReward.html">QuestReward</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="QuestReward_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="QuestReward.html#.display">display</a></li><li><a href="QuestReward.html#.reward">reward</a></li></ul></div></li><li><a href="QuestTracker.html">QuestTracker</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="QuestTracker_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="QuestTracker.html#canStart">canStart</a></li><li><a href="QuestTracker.html#complete">complete</a></li><li><a href="QuestTracker.html#emit">emit</a></li><li><a href="QuestTracker.html#get">get</a></li><li><a href="QuestTracker.html#hydrate">hydrate</a></li><li><a href="QuestTracker.html#isActive">isActive</a></li><li><a href="QuestTracker.html#isComplete">isComplete</a></li><li><a href="QuestTracker.html#serialize">serialize</a></li><li><a href="QuestTracker.html#start">start</a></li></ul></div></li><li><a href="RandomUtil.html">RandomUtil</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="RandomUtil_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="RandomUtil.html#.probability">probability</a></li></ul></div></li><li><a href="RestrictedCommandError.html">RestrictedCommandError</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="RestrictedCommandError_sub"></div></li><li><a href="Room.html">Room</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Room_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Room.html#addItem">addItem</a></li><li><a href="Room.html#addNpc">addNpc</a></li><li><a href="Room.html#addPlayer">addPlayer</a></li><li><a href="Room.html#closeDoor">closeDoor</a></li><li><a href="Room.html#emit">emit</a></li><li><a href="Room.html#getBehavior">getBehavior</a></li><li><a href="Room.html#getBroadcastTargets">getBroadcastTargets</a></li><li><a href="Room.html#getDoor">getDoor</a></li><li><a href="Room.html#hasBehavior">hasBehavior</a></li><li><a href="Room.html#hasDoor">hasDoor</a></li><li><a href="Room.html#hydrate">hydrate</a></li><li><a href="Room.html#isDoorLocked">isDoorLocked</a></li><li><a href="Room.html#lockDoor">lockDoor</a></li><li><a href="Room.html#openDoor">openDoor</a></li><li><a href="Room.html#removeItem">removeItem</a></li><li><a href="Room.html#removeNpc">removeNpc</a></li><li><a href="Room.html#removePlayer">removePlayer</a></li><li><a href="Room.html#removeSpawnedItem">removeSpawnedItem</a></li><li><a href="Room.html#removeSpawnedNpc">removeSpawnedNpc</a></li><li><a href="Room.html#resetDoors">resetDoors</a></li><li><a href="Room.html#respawnTick">respawnTick</a></li><li><a href="Room.html#serialize">serialize</a></li><li><a href="Room.html#spawnItem">spawnItem</a></li><li><a href="Room.html#spawnNpc">spawnNpc</a></li><li><a href="Room.html#unlockDoor">unlockDoor</a></li></ul><div class="member-type">Events</div><ul class="inner"><li><a href="Room.html#event:doorClosed">doorClosed</a></li><li><a href="Room.html#event:doorOpened">doorOpened</a></li><li><a href="Room.html#event:doorUnlocked">doorUnlocked</a></li><li><a href="Room.html#event:doorUnlocked">doorUnlocked</a></li></ul></div></li><li><a href="RoomManager.html">RoomManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="RoomManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="RoomManager.html#addRoom">addRoom</a></li><li><a href="RoomManager.html#findExit">findExit</a></li><li><a href="RoomManager.html#getRoom">getRoom</a></li><li><a href="RoomManager.html#removeRoom">removeRoom</a></li></ul></div></li><li><a href="Skill.html">Skill</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Skill_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Skill.html#cooldownId">cooldownId</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="Skill.html#activate">activate</a></li><li><a href="Skill.html#cooldown">cooldown</a></li><li><a href="Skill.html#execute">execute</a></li><li><a href="Skill.html#hasEnoughResources">hasEnoughResources</a></li><li><a href="Skill.html#onCooldown">onCooldown</a></li><li><a href="Skill.html#payResourceCosts">payResourceCosts</a></li></ul></div></li><li><a href="SkillManager.html">SkillManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="SkillManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="SkillManager.html#add">add</a></li><li><a href="SkillManager.html#find">find</a></li><li><a href="SkillManager.html#remove">remove</a></li></ul></div></li><li><a href="SkillUtil.html">SkillUtil</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="SkillUtil_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="SkillUtil.html#.calculateSkillGain">calculateSkillGain</a></li><li><a href="SkillUtil.html#.checkBranches">checkBranches</a></li><li><a href="SkillUtil.html#.rollMasteryIncrease">rollMasteryIncrease</a></li></ul></div></li><li><a href="TransportStream.html">TransportStream</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="TransportStream_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="TransportStream.html#readable">readable</a></li><li><a href="TransportStream.html#writable">writable</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="TransportStream.html#attach">attach</a></li><li><a href="TransportStream.html#command">command</a></li></ul></div></li><li><a href="TypeUtil.html">TypeUtil</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="TypeUtil_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="TypeUtil.html#.is">is</a></li><li><a href="TypeUtil.html#.iterable">iterable</a></li></ul></div></li><li><a href="ValidationUtil.html">ValidationUtil</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ValidationUtil_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="ValidationUtil.html#.validateName">validateName</a></li></ul></div></li></ul></div><div class="lnb-api hidden"><h3>Namespaces</h3><ul><li><a href="ChannelAudience.html">ChannelAudience</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ChannelAudience_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="ChannelAudience.html#alterMessage">alterMessage</a></li><li><a href="ChannelAudience.html#configure">configure</a></li><li><a href="ChannelAudience.html#getBroadcastTargets">getBroadcastTargets</a></li></ul></div></li></ul></div><div class="lnb-api hidden"><h3>Mixins</h3><ul><li><a href="Metadatable.html">Metadatable</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Metadatable_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Metadatable.html#getMeta">getMeta</a></li><li><a href="Metadatable.html#setMeta">setMeta</a></li></ul></div></li></ul></div><div class="lnb-api hidden"><h3>Interfaces</h3><ul><li><a href="Broadcastable.html">Broadcastable</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Broadcastable_sub"></div></li></ul></div><div class="lnb-api hidden"><h3>Global</h3><ul><li><a href="global.html#CommandType">CommandType</a></li><li><a href="global.html#EffectFlag">EffectFlag</a></li><li><a href="global.html#ItemType">ItemType</a></li><li><a href="global.html#PlayerRole">PlayerRole</a></li><li><a href="global.html#SkillFlag">SkillFlag</a></li><li><a href="global.html#SkillType">SkillType</a></li></ul></div>
</nav>
<div id="resizer"></div>

<div class="main" id="main">
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';

const fs = require('fs'),
      path = require('path'),
      chalk = require('chalk'),
      Data = require('./Data'),
      Area = require('./Area'),
      Command = require('./Command'),
      Room = require('./Room'),
      Skill = require('./Skill'),
      SkillType = require('./SkillType'),
      Aspect = require('./Aspect'),
      Helpfile = require('./Helpfile'),
      Logger = require('./Logger')

const srcPath = __dirname + '/';
const bundlesPath = srcPath + '../bundles/';

/**
 * Keep track of all bundles
 * @property {GameState} state
 */
class BundleManager {
  constructor(state) {
    this.state = state;
  }

  /**
   * Load content from all bundles
   * @param {?boolean} distribute Whether to distribute the loaded bundles into game state
   */
  loadBundles(distribute = true) {
    Logger.log(`${chalk.bold.red.underline('LOADING BUNDLES...')}`);

    // for each bundle folder
    const bundles = fs.readdirSync(bundlesPath);
    for (const bundle of bundles) {
      const bundlePath = bundlesPath + bundle;
      if (fs.statSync(bundlePath).isFile() || bundle === '.' || bundle === '..') {
        continue;
      }

      // only load bundles in config
      if (this.state.Config.get('bundles', []).indexOf(bundle) === -1) {
        continue;
      }

      this.loadBundle(bundle, bundlePath);
    }

    Logger.log(`${chalk.bold.red.underline('BUNDLES LOADED!')}`);

    // if not distributing the loaded bundles into game state, return
    if (!distribute) {
      return;
    }

    // in case one area references another, distribution is done after all areas are loaded
    this.state.AreaManager.distribute(this.state);

    // load the starting room from config
    this.state.RoomManager.startingRoom = this.state.RoomManager.getRoom(this.state.Config.get('startingRoom'));
    if (!this.state.RoomManager.startingRoom) {
      throw new Error('You must define a valid starting room in pinwheel.json');
    }
    Logger.log(`${chalk.bold.yellow('CONFIG')}${chalk.bold.white(':')} starting room is ${chalk.bold.magenta(this.state.RoomManager.startingRoom.entityReference)}`);

    // load the intro event from config
    if (!this.state.Config.get('introEvent', false)) {
      throw new Error('You must define an intro event in pinwheel.json');
    }
    Logger.log(`${chalk.bold.yellow('CONFIG')}${chalk.bold.white(':')} intro event is ${chalk.bold.magenta(this.state.Config.get('introEvent'))}`);
  }

  /**
   * Load content from a specific bundle
   * @param {string} bundle Bundle name
   * @param {string} bundlePath Path to bundle directory
   */
  loadBundle(bundle, bundlePath) {
    const features = [
      // TIP: quest goals and rewards must be loaded before areas that have quests
      { path: 'quest-goals/', fn: 'loadQuestGoals' },
      { path: 'quest-rewards/', fn: 'loadQuestRewards' },
      { path: 'behaviors/', fn: 'loadBehaviors' },
      { path: 'areas/', fn: 'loadAreas' },
      { path: 'commands/', fn: 'loadCommands' },
      { path: 'help/', fn: 'loadHelp' },
      { path: 'effects/', fn: 'loadEffects' },
      { path: 'skills/', fn: 'loadSkills' },
      { path: 'species/', fn: 'loadSpecies' },
      { path: 'archetypes/', fn: 'loadArchetypes' },
      { path: 'traits/', fn: 'loadTraits' },
      { path: 'input-events/', fn: 'loadInputEvents' },
      { path: 'server-events/', fn: 'loadServerEvents' },
      { path: 'channels.js', fn: 'loadChannels' },
      { path: 'player-events.js', fn: 'loadPlayerEvents' },
    ];

    Logger.verbose(`${chalk.bold.red('START')}${chalk.bold.white(': BUNDLE')} ${chalk.bold.yellow(bundle)}...`);
    for (const feature of features) {
      const path = bundlePath + '/' + feature.path;
      if (fs.existsSync(path)) {
        this[feature.fn](bundle, path);
      }
    }

    Logger.verbose(`${chalk.bold.red('DONE')}${chalk.bold.white(': BUNDLE')} ${chalk.bold.yellow(bundle)}`);
  }

  /**
   * Load quest goal definitions from a bundle
   * @param {string} bundle Bundle name
   * @param {string} goalsDir Path to quest goals directory
   */
  loadQuestGoals(bundle, goalsDir) {
    Logger.verbose(`\t${chalk.bold.green('START')}${chalk.bold.white(': QUEST GOALS...')}`);
    const files = fs.readdirSync(goalsDir);

    for (const goalFile of files) {
      const goalPath = goalsDir + goalFile;
      if (!Data.isScriptFile(goalPath, goalFile)) {
        continue;
      }

      const goalName = path.basename(goalFile, path.extname(goalFile));
      const loader = require(goalPath);
      let goalImport = loader(srcPath);
      Logger.verbose(`\t\t${chalk.bold.cyan(goalName)}`);

      this.state.QuestGoalManager.set(goalName, goalImport);
    }

    Logger.verbose(`\t${chalk.bold.blue('DONE')}${chalk.bold.white(': QUEST GOALS')}`);
  }

  /**
   * Load quest reward definitions from a bundle
   * @param {string} bundle Bundle name
   * @param {string} rewardsDir Path to quest rewards directory
   */
  loadQuestRewards(bundle, rewardsDir) {
    Logger.verbose(`\t${chalk.bold.green('START')}${chalk.bold.white(': QUEST REWARDS...')}`);
    const files = fs.readdirSync(rewardsDir);

    for (const rewardFile of files) {
      const rewardPath = rewardsDir + rewardFile;
      if (!Data.isScriptFile(rewardPath, rewardFile)) {
        continue;
      }

      const rewardName = path.basename(rewardFile, path.extname(rewardFile));
      const loader = require(rewardPath);
      let rewardImport = loader(srcPath);
      Logger.verbose(`\t\t${chalk.bold.cyan(rewardName)}`);

      this.state.QuestRewardManager.set(rewardName, rewardImport);
    }

    Logger.verbose(`\t${chalk.bold.blue('DONE')}${chalk.bold.white(': QUEST REWARDS')}`);
  }

  /**
   * Load behaviors from a bundle
   * @param {string} bundle Bundle name
   * @param {string} behaviorsDir Path to behaviors directory
   */
  loadBehaviors(bundle, behaviorsDir) {
    Logger.verbose(`\t${chalk.bold.green('START')}${chalk.bold.white(': BEHAVIORS...')}`);

    this.loadEntityBehaviors('npc', this.state.NpcBehaviorManager, behaviorsDir, this.state);
    this.loadEntityBehaviors('item', this.state.ItemBehaviorManager, behaviorsDir, this.state);
    this.loadEntityBehaviors('room', this.state.RoomBehaviorManager, behaviorsDir, this.state);
    this.loadEntityBehaviors('area', this.state.AreaBehaviorManager, behaviorsDir, this.state);

    Logger.verbose(`\t${chalk.bold.blue('DONE')}${chalk.bold.white(': BEHAVIORS')}`);
  }

  /**
   * Load all of one behavior type from a bundle
   * TIP: behaviors are classified by entities (NPCs, items, rooms, areas)
   * @param {string} type Name of behavior type
   * @param {*} manager Manager to hold the behavior type
   * @param {string} behaviorsDir Path to behaviors directory
   * @param {GameState} state Game state
   */
  loadEntityBehaviors(type, manager, behaviorsDir, state) {
    let typeDir = behaviorsDir + type + '/';

    if (!fs.existsSync(typeDir)) {
      return;
    }

    const printType = `: ${type.toUpperCase()} BEHAVIORS...`
    Logger.verbose(`\t\t${chalk.bold.green('START')}${chalk.bold.white(printType)}`);
    const files = fs.readdirSync(typeDir);

    for (const behaviorFile of files) {
      const behaviorPath = typeDir + behaviorFile;
      if (!Data.isScriptFile(behaviorPath, behaviorFile)) {
        continue;
      }

      const behaviorName = path.basename(behaviorFile, path.extname(behaviorFile));
      Logger.verbose(`\t\t\t${chalk.bold.cyan(behaviorName)}`);
      const behaviorListeners = require(behaviorPath)(srcPath).listeners;

      for (const [eventName, listener] of Object.entries(behaviorListeners)) {
        manager.addListener(behaviorName, eventName, listener(state));
      }
    }
  }

  /**
   * Load area definitions from a bundle
   * @param {string} bundle Bundle name
   * @param {string} areasDir Path to areas directory
   */
  loadAreas(bundle, areasDir) {
    Logger.verbose(`\t${chalk.bold.green('START')}${chalk.bold.white(': AREAS...')}`);

    const dirs = fs.readdirSync(areasDir);

    for (const areaDir of dirs) {
      if (fs.statSync(areasDir + areaDir).isFile()) {
        continue;
      }

      const areaPath = areasDir + areaDir;
      const areaName = path.basename(areaDir);
      let area = this.loadArea(bundle, areaName, areaPath);
      this.state.AreaManager.addArea(area);
    }

    Logger.verbose(`\t${chalk.bold.blue('DONE')}${chalk.bold.white(': AREAS')}`);
  }

  /**
   * Load a specific area's definitions from a bundle
   * @param {string} bundle Bundle name
   * @param {string} areaName Name of area
   * @param {string} areaPath Path to area's directory
   */
  loadArea(bundle, areaName, areaPath) {
    // define the directory structure to load
    const paths = {
      manifest: areaPath + '/manifest.yml',
      rooms: areaPath + '/rooms.yml',
      items: areaPath + '/items.yml',
      npcs: areaPath + '/npcs.yml',
      quests: areaPath + '/quests.yml',
    };

    // parse the manifest file (default yaml config for area)
    const manifest = Data.parseFile(paths.manifest);

    // create the area
    const area = new Area(bundle, areaName, manifest);

    Logger.verbose(`\t\t${chalk.bold.yellow.underline(areaName)}`);

    // TIP: quests must be loaded first so potential questors below can use the definitions
    if (fs.existsSync(paths.quests)) {
      this.loadQuests(area, paths.quests);
    }

    // load items
    if (fs.existsSync(paths.items)) {
      this.loadItems(area, paths.items);
    }

    // load NPCs
    if (fs.existsSync(paths.npcs)) {
      this.loadNpcs(area, paths.npcs);
    }

    // load rooms
    if (fs.existsSync(paths.rooms)) {
      this.loadRooms(area, paths.rooms);
    }

    return area;
  }

  /**
   * Load quest definitions from a specified area of a bundle
   * @param {Area} area Loaded Area
   * @param {string} questsFile Filename for area's quests
   */
  loadQuests(area, questsFile) {
    Logger.verbose(`\t\t${chalk.bold.green('START')}${chalk.bold.white(': QUESTS...')}`);

    // parse the file
    let quests = Data.parseFile(questsFile);

    // set the quest definitions in the factory
    for (const quest of quests) {
      Logger.verbose(`\t\t\t${chalk.bold.cyan(quest.id + ' - ' + quest.title)}`);
      this.state.QuestFactory.add(area.name, quest.id, quest);
      area.loadQuest(this.state.QuestFactory.makeQuestKey(area.name, quest.id));
    }

    Logger.verbose(`\t\t${chalk.bold.blue('DONE')}${chalk.bold.white(': QUESTS')}`);
  }

  /**
   * Load item definitions from a specified area of a bundle
   * @param {Area} area Loaded area
   * @param {string} itemsFile Filename for area's items
   */
  loadItems(area, itemsFile) {
    Logger.verbose(`\t\t${chalk.bold.green('START')}${chalk.bold.white(': ITEMS...')}`);

    // parse the file
    let items = Data.parseFile(itemsFile);

    if (!items || !items.length) {
      return;
    }

    // set the item definitions in the factory
    items.forEach(item => {
      const entityRef = this.state.ItemFactory.createEntityRef(area.name, item.id);
      this.state.ItemFactory.setDefinition(entityRef, item);
      area.loadItem(entityRef);
      Logger.verbose(`\t\t\t${chalk.bold.cyan(item.entityReference + ' - ' + item.name)}`);
    });

    Logger.verbose(`\t\t${chalk.bold.blue('DONE')}${chalk.bold.white(': ITEMS')}`);
  }

  /**
   * Load NPC definitions from a specified area of a bundle
   * @param {Area} area Loaded area
   * @param {string} npcsFile Filename for area's NPCs
   */
  loadNpcs(area, npcsFile) {
    Logger.verbose(`\t\t${chalk.bold.green('START')}${chalk.bold.white(': NPCS...')}`);

    // parse the file
    let npcs = Data.parseFile(npcsFile);

    if (!npcs || !npcs.length) {
      return;
    }

    // set the NPC definitions in the factory
    npcs = npcs.map(npc => {
      const entityRef = this.state.NpcFactory.createEntityRef(area.name, npc.id);
      this.state.NpcFactory.setDefinition(entityRef, npc);
      area.loadNpc(entityRef);
      Logger.verbose(`\t\t\t${chalk.bold.cyan(npc.entityReference + ' - ' + npc.name)}`);

      // move to NPC.hydrate()
      if (npc.quests) {
        // Update quest definitions with their questor
        // TODO: This currently means a given quest can only have a single questor, perhaps not optimal
        for (const qid of npc.quests) {
          const quest = this.state.QuestFactory.get(qid);
          if (!quest) {
            Logger.error(`\t\t\tError: NPC is questor for non-existent quest [${qid}]`);
            continue;
          }
          quest.npc = entityRef;
          this.state.QuestFactory.set(qid, quest);
        }
      }
    });

    Logger.verbose(`\t\t${chalk.bold.blue('DONE')}${chalk.bold.white(': NPCS')}`);
  }

  /**
   * Load room definitions from a specified area of a bundle
   * @param {Area} area Loaded area
   * @param {string} roomsFile Filename for area's rooms
   */
  loadRooms(area, roomsFile) {
    Logger.verbose(`\t\t${chalk.bold.green('START')}${chalk.bold.white(': ROOMS...')}`);

    // parse the file
    let rooms = Data.parseFile(roomsFile);

    if (!rooms || !rooms.length) {
      return;
    }

    // create and load the rooms
    rooms = rooms.map(room => new Room(area, room));
    rooms.forEach(room => {
      Logger.verbose(`\t\t\t${chalk.bold.cyan(room.entityReference + ' - ' + room.title)}`);
      area.addRoom(room);
      this.state.RoomManager.addRoom(room);
    });

    Logger.verbose(`\t\t${chalk.bold.blue('DONE')}${chalk.bold.white(': ROOMS')}`);
  }

  /**
   * Load command definitions from a bundle
   * @param {string} bundle Bundle name
   * @param {string} commandsDir Path to commands directory
   */
  loadCommands(bundle, commandsDir) {
    Logger.verbose(`\t${chalk.bold.green('START')}${chalk.bold.white(': COMMANDS...')}`);
    const files = fs.readdirSync(commandsDir);

    for (const commandFile of files) {
      const commandPath = commandsDir + commandFile;
      if (!Data.isScriptFile(commandPath, commandFile)) {
        continue;
      }

      const commandName = path.basename(commandFile, path.extname(commandFile));
      const command = this.createCommand(commandPath, commandName, bundle);
      this.state.CommandManager.add(command);
    }

    Logger.verbose(`\t${chalk.bold.blue('DONE')}${chalk.bold.white(': COMMANDS')}`);
  }

  /**
   * Create a command from a definition
   * @param {string} commandPath Path to command
   * @param {string} commandName Name of command
   * @param {string} bundle Name of bundle from which this command was loaded
   * @return {Command}
   */
  createCommand(commandPath, commandName, bundle) {
    const loader = require(commandPath);
    let cmdImport = loader(srcPath, bundlesPath);
    cmdImport.command = cmdImport.command(this.state);

    Logger.verbose(`\t\t${chalk.bold.cyan(commandName)}`);

    return new Command(
      bundle,
      commandName,
      cmdImport,
      commandPath
    );
  }

  /**
   * Load help definitions from a bundle
   * @param {string} bundle Name of bundle
   * @param {string} helpDir Path to help directory
   */
  loadHelp(bundle, helpDir) {
    Logger.verbose(`\t${chalk.bold.green('START')}${chalk.bold.white(': HELP...')}`);
    const files = fs.readdirSync(helpDir);

    for (const helpFile of files) {
      const helpPath = helpDir + helpFile;
      if (!fs.statSync(helpPath).isFile()) {
        continue;
      }

      const helpName = path.basename(helpFile, path.extname(helpFile));
      const def = Data.parseFile(helpPath);

      let hfile = null;
      try {
        hfile = new Helpfile(
          bundle,
          helpName,
          def
        );
        Logger.verbose(`\t\t${chalk.cyan.bold(helpName)}`);
      } catch (e) {
        Logger.warn(`\t\t${chalk.bold.yellow(e.message)}`);
        continue;
      }

      this.state.HelpManager.add(hfile);
    }

    Logger.verbose(`\t${chalk.bold.blue('DONE')}${chalk.bold.white(': HELP')}`);
  }

  /**
   * Load effect definitions from a bundle
   * @param {string} bundle Name of bundle
   * @param {string} effectsDir Path to effects directory
   */
  loadEffects(bundle, effectsDir) {
    Logger.verbose(`\t${chalk.bold.green('START')}${chalk.bold.white(': EFFECTS...')}`);
    const files = fs.readdirSync(effectsDir);

    for (const effectFile of files) {
      const effectPath = effectsDir + effectFile;
      if (!Data.isScriptFile(effectPath, effectFile)) {
        continue;
      }

      const effectName = path.basename(effectFile, path.extname(effectFile));
      const loader = require(effectPath);

      Logger.verbose(`\t\t${chalk.cyan.bold(effectName)}`);
      this.state.EffectFactory.add(effectName, loader(srcPath));
    }

    Logger.verbose(`\t${chalk.bold.blue('DONE')}${chalk.bold.white(': EFFECTS')}`);
  }

  /**
   * Load skill definitions from a bundle
   * @param {string} bundle Name of bundle
   * @param {string} skillsDir Path to skills directory
   */
  loadSkills(bundle, skillsDir) {
    Logger.verbose(`\t${chalk.bold.green('START')}${chalk.bold.white(': SKILLS...')}`);
    const files = fs.readdirSync(skillsDir);

    for (const skillFile of files) {
      const skillPath = skillsDir + skillFile;
      if (!Data.isScriptFile(skillPath, skillFile)) {
        continue;
      }

      const skillName = path.basename(skillFile, path.extname(skillFile));
      const loader = require(skillPath);
      let skillImport = loader(srcPath);
      if (skillImport.run) {
        skillImport.run = skillImport.run(this.state);
      }

      Logger.verbose(`\t\t${chalk.cyan.bold(skillName)}`);
      const skill = new Skill(skillName, skillImport, this.state);

      if (skill.type === SkillType.ABILITY) {
        this.state.AbilityManager.add(skill);
      }
      if (skill.type === SkillType.SPELL) {
        this.state.SpellManager.add(skill);
      }
      if (skill.type === SkillType.DISCIPLINE) {
        this.state.DisciplineManager.add(skill);
      }
    }

    Logger.verbose(`\t${chalk.bold.blue('DONE')}${chalk.bold.white(': SKILLS')}`);
  }

  /**
   * Load species definitions from a bundle
   * @param {string} bundle Bundle name
   * @param {string} speciesDir Path to species directory
   */
  loadSpecies(bundle, speciesDir) {
    Logger.verbose(`\t${chalk.bold.green('START')}${chalk.bold.white(': SPECIES...')}`);
    const files = fs.readdirSync(speciesDir);

    for (const speciesFile of files) {
      const speciesPath = speciesDir + speciesFile;
      if (!Data.isScriptFile(speciesPath, speciesFile)) {
        continue;
      }

      const speciesName = path.basename(speciesFile, path.extname(speciesFile));
      const loader = require(speciesPath);
      let speciesImport = loader(srcPath);

      Logger.verbose(`\t\t${chalk.bold.cyan(speciesName)}`);
      this.state.SpeciesManager.addAspect(speciesName, new Aspect(speciesImport));
    }

    Logger.verbose(`\t${chalk.bold.blue('DONE')}${chalk.bold.white(': SPECIES')}`);
  }

  /**
   * Load archetype definitions from a bundle
   * @param {string} bundle Bundle name
   * @param {string} archetypesDir Path to archetypes directory
   */
  loadArchetypes(bundle, archetypesDir) {
    Logger.verbose(`\t${chalk.bold.green('START')}${chalk.bold.white(': ARCHETYPES...')}`);
    const files = fs.readdirSync(archetypesDir);

    for (const archetypeFile of files) {
      const archetypePath = archetypesDir + archetypeFile;
      if (!Data.isScriptFile(archetypePath, archetypeFile)) {
        continue;
      }

      const archetypeName = path.basename(archetypeFile, path.extname(archetypeFile));
      const loader = require(archetypePath);
      let archetypeImport = loader(srcPath);

      Logger.verbose(`\t\t${chalk.bold.cyan(archetypeName)}`);
      this.state.ArchetypeManager.addAspect(archetypeName, new Aspect(archetypeImport));
    }

    Logger.verbose(`\t${chalk.bold.blue('DONE')}${chalk.bold.white(': ARCHETYPES')}`);
  }

  /**
   * Load trait definitions from a bundle
   * @param {string} bundle Bundle name
   * @param {string} traitsDir Path to traits directory
   */
  loadTraits(bundle, traitsDir) {
    Logger.verbose(`\t${chalk.bold.green('START')}${chalk.bold.white(': TRAITS...')}`);
    const files = fs.readdirSync(traitsDir);

    for (const traitFile of files) {
      const traitPath = traitsDir + traitFile;
      if (!Data.isScriptFile(traitPath, traitFile)) {
        continue;
      }

      const traitName = path.basename(traitFile, path.extname(traitFile));
      const loader = require(traitPath);
      let traitImport = loader(srcPath);

      Logger.verbose(`\t\t${chalk.bold.cyan(traitName)}`);
      this.state.TraitManager.addAspect(traitName, new Aspect(traitImport));
    }

    Logger.verbose(`\t${chalk.bold.blue('DONE')}${chalk.bold.white(': TRAITS')}`);
  }

  /**
   * Load input events from a bundle
   * @param {string} bundle Bundle name
   * @param {string} inputEventsDir Path to input events directory
   */
  loadInputEvents(bundle, inputEventsDir) {
    Logger.verbose(`\t${chalk.bold.green('START')}${chalk.bold.white(': INPUT EVENTS...')}`);
    const files = fs.readdirSync(inputEventsDir);

    for (const eventFile of files) {
      const eventPath = inputEventsDir + eventFile;
      if (!Data.isScriptFile(eventPath, eventFile)) {
        continue;
      }

      const eventName = path.basename(eventFile, path.extname(eventFile));
      Logger.verbose(`\t\t${chalk.bold.cyan(eventName)}`);
      const eventImport = require(eventPath)(srcPath);

      this.state.InputEventManager.add(eventName, eventImport.event(this.state));
    }

    Logger.verbose(`\t${chalk.bold.blue('DONE')}${chalk.bold.white(': INPUT EVENTS')}`);
  }

  /**
   * Load server events from a bundle
   * @param {string} bundle Bundle name
   * @param {string} serverEventsDir Path to server events directory
   */
  loadServerEvents(bundle, serverEventsDir) {
    Logger.verbose(`\t${chalk.bold.green('START')}${chalk.bold.white(': SERVER EVENTS...')}`);
    const files = fs.readdirSync(serverEventsDir);

    for (const eventsFile of files) {
      const eventsPath = serverEventsDir + eventsFile;
      if (!Data.isScriptFile(eventsPath, eventsFile)) {
        continue;
      }

      const eventsName = path.basename(eventsFile, path.extname(eventsFile));
      Logger.verbose(`\t\t${chalk.bold.cyan(eventsName)}`);
      const eventsListeners = require(eventsPath)(srcPath).listeners;

      for (const [eventName, listener] of Object.entries(eventsListeners)) {
        this.state.ServerEventManager.add(eventName, listener(this.state));
      }
    }

    Logger.verbose(`\t${chalk.bold.blue('DONE')}${chalk.bold.white(': SERVER EVENTS')}`);
  }

  /**
   * Load channels from a bundle
   * @param {string} bundle Bundle name
   * @param {string} channelsFile Filename for channels
   */
  loadChannels(bundle, channelsFile) {
    Logger.verbose(`\t${chalk.bold.green('START')}${chalk.bold.white(': CHANNELS...')}`);

    const loader = require(channelsFile);
    let channels = loader(srcPath);

    if (!Array.isArray(channels)) {
      channels = [channels];
    }

    channels.forEach(channel => {
      Logger.verbose(`\t\t${chalk.bold.cyan(channel.name)}`);
      channel.bundle = bundle;
      this.state.ChannelManager.add(channel);
    });

    Logger.verbose(`\t${chalk.bold.blue('DONE')}${chalk.bold.white(': CHANNELS')}`);
  }

  /**
   * Load player events from a bundle
   * @param {string} bundle Bundle name
   * @param {string} eventsFile Filename for player events
   */
  loadPlayerEvents(bundle, eventsFile) {
    Logger.verbose(`\t${chalk.bold.green('START')}${chalk.bold.white(': PLAYER EVENTS...')}`);

    const playerListeners = require(eventsFile)(srcPath).listeners;

    for (const [eventName, listener] of Object.entries(playerListeners)) {
      Logger.verbose(`\t\t${chalk.bold.cyan(eventName)}`);
      this.state.PlayerManager.addListener(eventName, listener(this.state));
    }

    Logger.verbose(`\t${chalk.bold.blue('DONE')}${chalk.bold.white(': PLAYER EVENTS')}`);
  }
}

module.exports = BundleManager;
</code></pre>
        </article>
    </section>




</div>

<footer>
    <img class="logo" src="../_static/images/logo.png" style="width: 120px; height: 120px">
    <div class="footer-text">Copyright © 2018, Andrew Zigler</div>
</footer>
<script>prettyPrint();</script>
<script src="scripts/jquery.min.js"></script>
<script src="scripts/tui-doc.js"></script>
<script src="scripts/linenumber.js"></script>

    <script>
        var id = '_sub'.replace(/"/g, '_');
        var selectedApi = document.getElementById(id); // do not use jquery selector
        var $selectedApi = $(selectedApi);

        $selectedApi.removeClass('hidden');
        $selectedApi.parent().find('.glyphicon').removeClass('glyphicon-plus').addClass('glyphicon-minus');
        showLnbApi();
    </script>

</body>
</html>
